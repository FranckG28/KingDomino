@startuml
'https://plantuml.com/class-diagram

skinparam style strictuml
skinparam classAttributeIconSize 0
skinparam classFontStyle Bold
hide enum methods

class Kingdomino {
    + {static}main()
}

package models {

    interface GameObserver {
        + reactGame(game:Game)
    }

    class Game {
        + Game(players:Player[], deck:Domino[], middle:Boolean, harmony:Boolean)

        - round:Integer

        - middle:Boolean
        - harmony:Boolean

        + getCurrentPlayer():Player
        + setCurrentPlayer(player:Player)
        + getAllPlayers():Player[]

        + nextRound()
        + getRound():Integer

        + getDraw(): Domino[]
        + getLastDraw(): Domino[]
        + setDraw(draw:Domino[])

        + getDeck(): Domino[]

        + isMiddle():Boolean
        + isHarmony():Boolean

        + notifyObservers()
        + addObserver(observer:GameObserver)
    }

    class Player {
        + Player(name:String, color:Colors, kings:King[])
        - name:String

        + getName():String
        + getColor():Colors
        + getKings():King[]
    }

    class King {
        + King(parent:Player)
        + getParent():Player
    }

    class Kingdom {
        + Kingdom(parent:Player)
        + getParent():Player
    }

    class Domino {
        + Domino(number:Integer,tile1:Tile, tile2:Tile)
        - number:Integer

        + getNumber():Integer
        + getTile1():Tile
        + getTile2():Tile
    }

    class Tile {
        + Tile(land:Lands, crowns:Integer)
        - crowns:Integer

        + getCrowns():Integer
        + getLand():Lands
    }

    enum Lands {
        WATER
        FOREST
        WHEAT
        GRASS
        SWAMP
        MINE
        CASTLE
    }

    enum Colors {
        BLUE
        GREEN
        YELLOW
        PINK
    }

    enum Orientations {
        SOUTH
        WEST
        EAST
        NORTH
    }

    class DominoPreview {
        - x:Integer
        - y:Integer

        + DominoPreview(domino:Domino)
        + setPositionX(x:Integer)
        + setPositionY(y:Integer)
        + setOrientation(orientation:Orientations)

        + getPositionX():Integer
        + getPositionY():Integer
        + getOrientation():Orientations

        + addObserver(observer:DominoPreviewObserver)
        + notifyObservers()
    }

    interface DominoPreviewObserver {
        + reactPreview(DominoPreview)
    }

}

package views {

    class GameView implements GameObserver, DominoPreviewObserver {
        + GameView(controller:GameController)
        + reactGame(game:Game)
        + reactPreview(preview:DominoPreview)
    }

    class StartMenu {
        + StartMenu(controller:GameCreator)
        + getPlayers():Player[]
        + isMiddle():Boolean
        + isHarmony():Boolean
    }

    class EndMenu {
        + EndMenu(game:Game)
    }

    class PlayerEditor {
        + PlayerEditor()
        + getPlayerName():String
        + getPlayerColor():Colors
    }
}

package controllers {

    class GameController {
        + GameController(game:Game)
        + makeDraw()
        + playerPlaceCastle()
        + playerChooseDomino()
        + playerPlaceDomino()
    }

    class GameCreator {
        - dominoes:Domino[]

        + GameCreator(dominoes:Domino[])
        + createGame(view:StartMenu)
    }

}

Kingdomino ..> StartMenu : "<<use>>"
Kingdomino ..> GameCreator : "<<use>>"

GameCreator ..> Game : "<<use>>"
GameCreator ..> GameView : "<<use>>"
GameCreator ..> GameController : "<<use>>"

Game " - players" *--> "2, 4" Player : > contains
Game " - deck" *--> "0, 48" Domino : > contains
Game " - draw" *--> "3, 4" Domino : > contains
Game " - lastDraw" *--> "3, 4" Domino : > contains
Game " - observers" o--> "*" GameObserver : > contains
Game " - currentPlayer" o--> Player : > contains

GameController " - game" o--> Game : > contains
GameController ..> EndMenu : "<<use>>"
GameController ..> DominoPreview : "<<use>>"

GameView " - controller" o--> GameController : > contains
GameView ..> Game : "<<use>>"
GameView ..> DominoPreview : "<<use>>"

StartMenu " + players" *--> "2, 4" PlayerEditor : > contains

EndMenu ..> Game : "<<use>>"
EndMenu ..> StartMenu : "<<use>>"

Player " + kingdom"  *--> Kingdom : > contains
Player " - kings" *--> "1,2" King : > contains
Player " - color" *-> Colors : > has

King " - parent" o--> Player : > knows

Kingdom " - parent" o--> Player : > knows
Kingdom " + board" o--> "[5][5]" Tile : > contains

Domino " - tile1" o-> Tile : > contains
Domino " - tile2" o-> Tile : > contains
Domino " + king" o--> King : > contains

Tile *-> Lands : " - type" > is

DominoPreview " - domino" o--> "1" Domino : > contains
DominoPreview " - orientation" *-> "1" Orientations : > contains
DominoPreview " - observers" o--> "*" DominoPreviewObserver : > contains

@enduml